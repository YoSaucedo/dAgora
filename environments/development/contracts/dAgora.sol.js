// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[],"name":"removeProduct","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"dphCode","type":"bytes32"},{"name":"status","type":"uint8"}],"name":"updateOrderStatus","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"productList","outputs":[{"name":"title","type":"string"},{"name":"description","type":"string"},{"name":"category","type":"uint256"},{"name":"price","type":"uint256"},{"name":"stock","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"orderCount","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"dphCode","type":"bytes32"},{"name":"newStock","type":"uint256"}],"name":"updateProductStock","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"buy","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"title","type":"string"},{"name":"description","type":"string"},{"name":"category","type":"uint256"},{"name":"price","type":"uint256"},{"name":"stock","type":"uint256"}],"name":"addProduct","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"productCount","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"orderList","outputs":[{"name":"id","type":"uint256"},{"name":"customer","type":"address"},{"name":"totalCost","type":"uint256"},{"name":"productId","type":"uint256"},{"name":"status","type":"uint8"}],"type":"function"},{"constant":true,"inputs":[],"name":"admin","outputs":[{"name":"","type":"address"}],"type":"function"},{"inputs":[],"type":"constructor"}],
    binary: "606060405260008054600160a060020a031916331781556002556106c5806100276000396000f36060604052361561008d5760e060020a60003504630177b556811461008f57806312d35eed146100ae578063528c87d2146100d3578063713d856b14610104578063a30f30e6146100ae578063d96a094a1461011c578063dc60d3d214610143578063e0f6ef87146101f3578063f3fef3a3146101fc578063f4fb9b2f14610220578063f851a4401461026d575b005b61008d600054600160a060020a03908116339091161461040257610002565b61008d600435602435600054600160a060020a0390811633909116146103fe57610002565b61027f6004356001602081905260009182526040909120600381015460028201546004830154929384019290919085565b61039b60043560046020526000908152604090205481565b61008d6004356000818152600160205260408120600301549034829010156105a557610002565b61039b6004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843750506040805160208835808b0135601f8101839004830284018301909452838352979998604498929750919091019450909250829150840183828082843750949650509335935050606435915050608435600080548190600160a060020a03908116339091161461040457610002565b61039b60025481565b61008d60043560243560005433600160a060020a0390811691161461069a57610002565b6003602081815260048035600090815260408082209093526024358152919091208054600182015460028301549483015492909301546103ad949193600160a060020a0316929060ff1685565b6103e1600054600160a060020a031681565b60408051908101849052606081018390526080810182905260a08082528654600260018216156101000260001901909116049082018190528190602082019060c0830190899080156103125780601f106102e757610100808354040283529160200191610312565b820191906000526020600020905b8154815290600101906020018083116102f557829003601f168201915b5050838103825287546002600182161561010002600019019091160480825260209190910190889080156103875780601f1061035c57610100808354040283529160200191610387565b820191906000526020600020905b81548152906001019060200180831161036a57829003601f168201915b505097505050505050505060405180910390f35b60408051918252519081900360200190f35b60408051958652600160a060020a039490941660208601528484019290925260608401526080830152519081900360a00190f35b60408051600160a060020a03929092168252519081900360200190f35b5050565b565b506002805460019081018083556040805160a0810182528a815260208181018b90528183018a90526060820189905260808201889052600084815285825292832082518051825483875295849020969894979296879660001994811615610100029490940190931694909404601f9081018490048301949391909101908390106104b157805160ff19168380011785555b506104e19291505b80821115610540576000815560010161049d565b82800160010185558215610495579182015b828111156104955782518260005055916020019190600101906104c3565b50506020820151816001016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061054457805160ff19168380011785555b5061057492915061049d565b5090565b82800160010185558215610534579182015b82811115610534578251826000505591602001919060010190610556565b5050604082015160028201556060820151600382015560809190910151600491909101555060019695505050505050565b813411156105db5760405133600160a060020a031690600090348590039082818181858883f1935050505015156105db57610002565b5033600160a060020a03811660008181526004602081815260408084208054825160a0810184526001918201808252818601998a528185019a8b52606082018c8152608083018981529989526003808852868a20928a52918752858920925183559951828401805473ffffffffffffffffffffffffffffffffffffffff19169091179055995160028201559751988801989098559451958301805460ff1916909617909555835486019093559481529290529020018054600019019055565b604051600160a060020a03831690600090839082818181858883f1935050505015156103fe5761000256",
    unlinked_binary: "606060405260008054600160a060020a031916331781556002556106c5806100276000396000f36060604052361561008d5760e060020a60003504630177b556811461008f57806312d35eed146100ae578063528c87d2146100d3578063713d856b14610104578063a30f30e6146100ae578063d96a094a1461011c578063dc60d3d214610143578063e0f6ef87146101f3578063f3fef3a3146101fc578063f4fb9b2f14610220578063f851a4401461026d575b005b61008d600054600160a060020a03908116339091161461040257610002565b61008d600435602435600054600160a060020a0390811633909116146103fe57610002565b61027f6004356001602081905260009182526040909120600381015460028201546004830154929384019290919085565b61039b60043560046020526000908152604090205481565b61008d6004356000818152600160205260408120600301549034829010156105a557610002565b61039b6004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843750506040805160208835808b0135601f8101839004830284018301909452838352979998604498929750919091019450909250829150840183828082843750949650509335935050606435915050608435600080548190600160a060020a03908116339091161461040457610002565b61039b60025481565b61008d60043560243560005433600160a060020a0390811691161461069a57610002565b6003602081815260048035600090815260408082209093526024358152919091208054600182015460028301549483015492909301546103ad949193600160a060020a0316929060ff1685565b6103e1600054600160a060020a031681565b60408051908101849052606081018390526080810182905260a08082528654600260018216156101000260001901909116049082018190528190602082019060c0830190899080156103125780601f106102e757610100808354040283529160200191610312565b820191906000526020600020905b8154815290600101906020018083116102f557829003601f168201915b5050838103825287546002600182161561010002600019019091160480825260209190910190889080156103875780601f1061035c57610100808354040283529160200191610387565b820191906000526020600020905b81548152906001019060200180831161036a57829003601f168201915b505097505050505050505060405180910390f35b60408051918252519081900360200190f35b60408051958652600160a060020a039490941660208601528484019290925260608401526080830152519081900360a00190f35b60408051600160a060020a03929092168252519081900360200190f35b5050565b565b506002805460019081018083556040805160a0810182528a815260208181018b90528183018a90526060820189905260808201889052600084815285825292832082518051825483875295849020969894979296879660001994811615610100029490940190931694909404601f9081018490048301949391909101908390106104b157805160ff19168380011785555b506104e19291505b80821115610540576000815560010161049d565b82800160010185558215610495579182015b828111156104955782518260005055916020019190600101906104c3565b50506020820151816001016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061054457805160ff19168380011785555b5061057492915061049d565b5090565b82800160010185558215610534579182015b82811115610534578251826000505591602001919060010190610556565b5050604082015160028201556060820151600382015560809190910151600491909101555060019695505050505050565b813411156105db5760405133600160a060020a031690600090348590039082818181858883f1935050505015156105db57610002565b5033600160a060020a03811660008181526004602081815260408084208054825160a0810184526001918201808252818601998a528185019a8b52606082018c8152608083018981529989526003808852868a20928a52918752858920925183559951828401805473ffffffffffffffffffffffffffffffffffffffff19169091179055995160028201559751988801989098559451958301805460ff1916909617909555835486019093559481529290529020018054600019019055565b604051600160a060020a03831690600090839082818181858883f1935050505015156103fe5761000256",
    address: "0x6d74a52d2a1370f08b0fad61bbc98f7172ca1db8",
    generated_with: "2.0.8",
    contract_name: "dAgora"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("dAgora error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("dAgora error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("dAgora error: Please call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("dAgora error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.dAgora = Contract;
  }

})();
